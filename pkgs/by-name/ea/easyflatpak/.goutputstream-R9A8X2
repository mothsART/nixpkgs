{ 
  lib
, pkgs
, stdenv
, fetchFromGitHub
}:

stdenv.mkDerivation {
  pname = "easy flatpak";
  version = "2.19.0";

  src = fetchFromGitHub {
    owner = "imikado";
    repo = "dupotEasyFlatpak";
    rev = "2.19.0";
    sha256 = "1f4jfj8xyj818d9k8jpz5l0sjggv1jakmg7c23hgcn5dd94k4d2z";
  };

  buildInputs = [
    pkgs.flutter
  ];

  buildPhase = ''
	flutter pub get
    flutter build linux
  '';

  installPhase = ''
    mkdir -p $out/bin
    cp build/app/outputs/flutter-apk/app-release.apk $out/bin/flutter-app.apk
  '';

  meta = with lib; {
    description = "Help to install flatpak easier";
    homepage = "https://github.com/imikado/dupotEasyFlatpak";
    changelog = "https://github.com/imikado/dupotEasyFlatpak/releases/tag/${version}";
    maintainers = with maintainers; [ mothsart ];
    license = with licenses; [ gpl2Plus ];
    mainProgram = "easy-flatpak";
  };
}
